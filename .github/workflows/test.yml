name: GitHub Actions Demo

on: pull_request

jobs:
  Explore-GitHub-Actions:
    runs-on: ubuntu-latest
    outputs:
      files: ${{ steps.files.outputs.files }}
    steps:
      - name: Fetch Base Branch Latest Commit
        uses: actions/checkout@v4
        with:
          ref: ${{ github.event.pull_request.base.ref }}
      - name: Checkout Pull Request
        uses: actions/checkout@v4

      - name: Find changed files
        id: files
        run: |-
          files=$(git diff --name-only origin/${{ github.event.pull_request.base.ref }}..${{ github.sha }} -- data)
          echo "files=$files" >> $GITHUB_OUTPUT
      - name: Print files
        run: for f in "${FILES}"; do echo "${f##data/}:${f}; done
        env:
          FILES: ${{ steps.files.outputs.files }}